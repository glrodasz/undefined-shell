---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION, SITE_AUTHOR } from "../consts";
import Container from "../components/Container.astro";
import SimpleAnalytics from "../components/SimpleAnalytics.astro";
import PostList from "../components/PostList.astro";
import { getPostsByLanguage } from "../utils/content";
import { DEFAULT_LOCALE } from "../i18n/config";

const posts = (await getPostsByLanguage(DEFAULT_LOCALE)).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead
      title={`${SITE_TITLE} by ${SITE_AUTHOR}`}
      description={SITE_DESCRIPTION}
    />
  </head>
  <body>
    <Header />
    <Container>
      <main>
        <section>
          <PostList posts={posts} locale={DEFAULT_LOCALE} />
        </section>
      </main>
    </Container>
    <Footer />
    <SimpleAnalytics />
  </body>
</html>
